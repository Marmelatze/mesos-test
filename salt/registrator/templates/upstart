description "Registrator"

start on filesystem and started docker and started consul
stop on runlevel [!2345]
respawn

pre-start script
  /usr/bin/docker rm -f registrator ||Â true
end script

script
  /usr/bin/docker run -v /var/run/docker.sock:/tmp/docker.sock -h {{ grains['fqdn'] }} --restart=always --name=registrator gliderlabs/registrator:master -ttl 30 -ttl-refresh 20 -internal consul://10.244.65.1:8500
end script
